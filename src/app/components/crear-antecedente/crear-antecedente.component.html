<app-menu></app-menu>
<div class="antecedente-container">
  <h2>Crear Antecedente</h2>

  <!-- Tabla de usuarios -->
  <table class="table">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Email</th>
        <th>Acción</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let usuario of usuarios">
        <td>{{ usuario.username }}</td>
        <td>{{ usuario.email }}</td>
        <td>
          <button (click)="seleccionarPaciente(usuario)">Seleccionar Paciente</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Formulario de antecedentes -->
  <form *ngIf="pacienteSeleccionado" (ngSubmit)="crearAntecedente()">
    <h3>Paciente Seleccionado: {{ pacienteSeleccionado.username }} - {{ pacienteSeleccionado.email }}</h3>

    <div class="form-group">
      <label for="descripcion">Descripción:</label>
      <textarea id="descripcion" [(ngModel)]="descripcion" name="descripcion" required></textarea>
    </div>

    <div class="form-group">
      <label for="fecha">Fecha:</label>
      <input type="date" id="fecha" [(ngModel)]="fecha" name="fecha" required />
    </div>

    <div class="form-group">
      <label for="tipo">Tipo de Antecedente:</label>
      <input type="text" id="tipo" [(ngModel)]="tipo" name="tipo" placeholder="Ej: Alergia, Cirugía, Enfermedad" required />
    </div>

    <button type="submit" [disabled]="isLoading">
      {{ isLoading ? 'Guardando...' : 'Guardar Antecedente' }}
    </button>
  </form>
</div>
